_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[19],{"HaE+":function(e,n,t){"use strict";function r(e,n,t,r,c,i,a){try{var o=e[i](a),s=o.value}catch(d){return void t(d)}o.done?n(s):Promise.resolve(s).then(r,c)}function c(e){return function(){var n=this,t=arguments;return new Promise((function(c,i){var a=e.apply(n,t);function o(e){r(a,c,i,o,s,"next",e)}function s(e){r(a,c,i,o,s,"throw",e)}o(void 0)}))}}t.d(n,"a",(function(){return c}))},antB:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ver-programacion-admin",function(){return t("x1GZ")}])},wvJV:function(e,n,t){"use strict";var r=t("rePB"),c=t("q1tI"),i=t("HvpM");function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}n.a=function(){var e=Object(c.useState)({}),n=e[0],t=e[1],o=Object(c.useContext)(i.a),s=o.firebase;o.usuario;Object(c.useEffect)((function(){function e(e){var n=e.docs.map((function(e){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){Object(r.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({idMostrarDB:e.id},e.data())}));t(n)}s.db.collection("mostrarprogramacion").onSnapshot(e)}),[]);return n.verProgramacion,{mostrarProgramacion:n,guardarMostrarProgramacion:t}}},x1GZ:function(e,n,t){"use strict";t.r(n);var r=t("rePB"),c=t("o0o1"),i=t.n(c),a=t("HaE+"),o=t("h4VS"),s=t("nKUr"),d=t("q1tI"),l=t("5Yp1"),u=t("HvpM"),b=t("5D9J"),m=t("PSD3"),p=t.n(m);t("wvJV");function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){Object(r.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function g(){var e=Object(o.a)(["\n    text-align: end;\n    cursor: pointer;\n"]);return g=function(){return e},e}function h(){var e=Object(o.a)(["\n    display: flex;\n    justify-content: space-between;\n    border-bottom: 1px solid #e1e1e1;\n    background-color:  #fff3cd;\n    color: #856404;\n    border-color: #ffeeba;\n    margin-bottom: 0.5rem;\n    align-items: center;\n    padding:0.5rem;\n\n    p {\n        margin: 0.5rem 1rem 0.5rem 0 ;\n    }\n    \n    div{\n        display: flex;\n        \n        p {\n            margin: 0 1rem 0 0;\n            cursor: pointer;\n        }\n    }\n    \n"]);return h=function(){return e},e}function O(){var e=Object(o.a)(["\n    display: flex;\n    justify-content: space-between;\n    border-bottom: 1px solid #e1e1e1;\n    color: #0c5460;\n    background-color: #d1ecf1;\n    border-color: #bee5eb;\n    margin-bottom: 0.5rem;\n    align-items: center;\n    padding:0.5rem;\n\n    p {\n        margin: 0.5rem 1rem 0.5rem 0 ;\n    }\n    \n    div{\n        display: flex;\n        \n        p {\n            margin-right: 1rem;\n            cursor: pointer;\n        }\n    }\n"]);return O=function(){return e},e}function x(){var e=Object(o.a)(["\n    text-align: start;\n    cursor: pointer;\n"]);return x=function(){return e},e}function v(){var e=Object(o.a)(["\n    background: #e1e1e1;\n    \n    text-align: center;\n    align-items: center;\n    padding: 1rem;\n    margin: 1rem 0.5rem;\n\n    @media (min-width: 768px) {\n        width: 55rem;\n        margin: 2rem auto 2rem 30%;\n    }\n"]);return v=function(){return e},e}function P(){var e=Object(o.a)(["\n    margin: 1rem 0.5rem;\n    text-align: center;\n    align-items: center;\n\n    input {\n        border: none;\n        border-bottom: 2px solid  #d6d8db;\n        width: 300px;\n\n    }\n\n    @media (min-width: 768px) {\n        width: 55rem;\n        margin: 5rem auto 2rem 30%;\n    }\n"]);return P=function(){return e},e}var w=b.a.div(P()),B=b.a.div(v()),y=b.a.p(x()),N=b.a.li(O()),D=b.a.li(h()),E=b.a.p(g());n.default=function(){var e=Object(d.useState)([]),n=e[0],t=e[1],c=Object(d.useState)({textobusqueda:""}),o=c[0],b=c[1],m=Object(d.useState)([]),f=m[0],g=m[1],h=Object(d.useState)([]),O=h[0],x=h[1],v=Object(d.useState)([]),P=v[0],C=v[1],S=Object(d.useState)(!1),k=S[0],_=S[1],A=Object(d.useState)({}),U=A[0],q=A[1];Object(d.useEffect)((function(){!function(){var e=o.textobusqueda.toLowerCase(),t=n.filter((function(n){return n.cupos.toString().includes(e)||n.supervisor[0].nombre.toLowerCase().includes(e)||n.zona.toLowerCase().includes(e)||n.institucion.toLowerCase().includes(e)||n.fecha.toLowerCase().includes(e)}));C(t),""===o.textobusqueda?_(!1):_(!0)}()}),[o]),Object(d.useEffect)((function(){n.forEach((function(e){var n=e.idProgramacionDB,t=(e.cantidaddistribuidoras,f.filter((function(e){return e.idSede===n})));!function(){var e=Object(a.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=R.db.collection("programacion").doc(n),e.next=3,r.update({asignacion:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}))}),[f]),Object(d.useEffect)((function(){n.forEach((function(e){var n=e.idProgramacionDB,t=O.filter((function(e){return e.idSede===n}));!function(){var e=Object(a.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=R.db.collection("programacion").doc(n),e.next=3,r.update({pendientes:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}))}),[O]);var M=Object(d.useContext)(u.a),R=M.firebase;M.usuario;Object(d.useEffect)((function(){function e(e){var n=e.docs.map((function(e){return j({idProgramacionDB:e.id},e.data())}));t(n)}R.db.collection("programacion").orderBy("fecha","asc").onSnapshot(e)}),[]),Object(d.useEffect)((function(){function e(e){var n=e.docs.map((function(e){return j({idAsignacionesDB:e.id},e.data())}));g(n)}R.db.collection("asignacion").onSnapshot(e)}),[]),Object(d.useEffect)((function(){function e(e){var n=e.docs.map((function(e){return j({idPendientesDB:e.id},e.data())}));x(n)}R.db.collection("pendiente").onSnapshot(e)}),[]),Object(d.useEffect)((function(){function e(e){var n=e.docs.map((function(e){return j({idMostrarDB:e.id},e.data())}));q(n)}R.db.collection("mostrarprogramacion").onSnapshot(e)}),[]);var T=function(e){p.a.fire({title:"Realmente desea eliminar este usuario?",text:"Un usuario que se elimine no se puede Recuperar!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!"}).then((function(n){if(n.isConfirmed){console.log(e);var t=R.db.collection("asignacion").doc(e);""===n||t.delete(),p.a.fire("Eliminado!","Se ha Eliminado con exito")}}))},X=function(e){var n=O.filter((function(n){return n.idPendientesDB===e})),t={};t.datos=n[0].datos,t.idSede=n[0].idSede,p.a.fire({title:"Realmente desea Asignar Este Usuario?",text:"Al asignar este usuario se eliminara de pendientes!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Asignar!"}).then((function(n){if(n.isConfirmed){!function(){if(""!==n){R.db.collection("asignacion").add(t);R.db.collection("pendiente").doc(e).delete()}}(),p.a.fire("Asignada!","Se ha asignado con exito")}}))},J=function(e){p.a.fire({title:"Realmente desea eliminar este usuario?",text:"Un usuario que se elimine no se puede Recuperar!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!"}).then((function(n){if(n.isConfirmed){console.log(e);var t=R.db.collection("pendiente").doc(e);""===n||t.delete(),p.a.fire("Eliminado!","Se ha Eliminado con exito")}}))},L=function(){return U[0].verProgramacion?R.db.collection("mostrarprogramacion").doc(U[0].idMostrarDB).update({verProgramacion:!1}):R.db.collection("mostrarprogramacion").doc(U[0].idMostrarDB).update({verProgramacion:!0})},F=function(e){var t=n.filter((function(n){return n.idProgramacionDB===e}));p.a.fire({title:"Realmente desea eliminar esta Programacion?",text:"Una Programacion eliminada no se puede recuperar!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!"}).then((function(n){if(n.isConfirmed){console.log(e);!function(){if(""!==n)0!=t.length&&t[0].asignacion.map((function(e){var n=e.idAsignacionesDB;return console.log(n),R.db.collection("asignacion").doc(n).delete()})),0!=t.length&&t[0].pendientes.map((function(e){var n=e.idPendientesDB;return console.log(n),R.db.collection("pendiente").doc(n).delete()})),R.db.collection("programacion").doc(e).delete()}(),p.a.fire("Eliminado!","Se ha Eliminado con exito")}}))};return Object(s.jsxs)(l.a,{children:[Object(s.jsxs)(w,{children:[Object(s.jsx)("input",{type:"text",placeholder:"Buscar",name:"textobusqueda",onChange:function(e){return b(Object(r.a)({},e.target.name,e.target.value))}}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{type:"button",className:"btn btn-dark my-2",children:"Buscar"})]}),Object(s.jsxs)(B,{children:[void 0===U[0]?null:Object(s.jsx)("div",{children:U[0].verProgramacion?Object(s.jsx)(y,{onClick:function(){return L()},children:"Dejar de Publicar Programacion"}):Object(s.jsx)(y,{onClick:function(){return L()},children:"Publicar Programacion"})}),Object(s.jsx)("h2",{children:"Programacion"}),k?Object(s.jsx)("div",{children:P.map((function(e){return Object(s.jsxs)("div",{className:"card my-3",children:[Object(s.jsx)("div",{className:"card-header",children:Object(s.jsxs)("p",{className:"card-text",children:["Fecha despacho: ",e.fecha," "]})}),Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsx)("h5",{className:"card-title",children:e.institucion}),Object(s.jsxs)("p",{className:"card-text",children:["Zona: ",e.zona]}),Object(s.jsxs)("p",{className:"card-text",children:["Supervisor: ",e.supervisor[0].nombre]}),Object(s.jsxs)("p",{className:"card-text",children:["cupos: ",e.cupos]}),Object(s.jsxs)("p",{className:"card-text",children:["cantidad Distribuidoras: ",e.cantidaddistribuidoras]}),e.asignacion&&e.pendientes?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("p",{children:[Object(s.jsx)("a",{className:"btn btn-success mx-1","data-toggle":"collapse",href:"#".concat(e.idProgramacionDB),role:"button","aria-expanded":"false","aria-controls":"collapseExample",children:"Asignadas"}),Object(s.jsx)("a",{className:"btn btn-warning","data-toggle":"collapse",href:"#".concat(e.idProgramacionDB,"1"),role:"button","aria-expanded":"false","aria-controls":"collapseExample",children:"Pendientes"})]}),Object(s.jsx)("div",{className:"collapse",id:e.idProgramacionDB,children:Object(s.jsx)("div",{className:"card card-body",children:Object(s.jsx)("ul",{className:"list-group list-group-flush",children:e.asignacion.map((function(e){return Object(s.jsxs)(N,{className:"list-group-item",children:[Object(s.jsx)("p",{children:e.datos.nombre}),Object(s.jsx)("div",{children:Object(s.jsx)("p",{onClick:function(){return T(e.idAsignacionesDB)},children:"X"})})]},e.datos.idUsuario)}))})})}),Object(s.jsx)("div",{className:"collapse",id:"".concat(e.idProgramacionDB,"1"),children:Object(s.jsx)("div",{className:"card card-body",children:Object(s.jsx)("ul",{className:"list-group list-group-flush",children:e.pendientes.map((function(e){return Object(s.jsxs)(D,{className:"list-group-item alert",children:[Object(s.jsx)("p",{children:e.datos.nombre}),Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{onClick:X,children:"asignar"}),Object(s.jsx)("p",{onClick:J,children:"X"})]})]},e.datos.idUsuario)}))})})})]}):null,Object(s.jsx)(E,{onClick:function(){return F(e.idProgramacionDB)},children:"Eliminar"})]})]},e.idProgramacionDB)}))}):null,k?null:Object(s.jsx)("div",{children:n.map((function(e){return Object(s.jsxs)("div",{className:"card my-3",children:[Object(s.jsx)("div",{className:"card-header",children:Object(s.jsxs)("p",{className:"card-text",children:["Fecha despacho: ",e.fecha," "]})}),Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsx)("h5",{className:"card-title",children:e.institucion}),Object(s.jsxs)("p",{className:"card-text",children:["Zona: ",e.zona]}),Object(s.jsxs)("p",{className:"card-text",children:["Supervisor: ",e.supervisor[0].nombre]}),Object(s.jsxs)("p",{className:"card-text",children:["cupos: ",e.cupos]}),Object(s.jsxs)("p",{className:"card-text",children:["cantidad Distribuidoras: ",e.cantidaddistribuidoras]}),e.asignacion&&e.pendientes?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("p",{children:[Object(s.jsx)("a",{className:"btn btn-success mx-1","data-toggle":"collapse",href:"#".concat(e.idProgramacionDB),role:"button","aria-expanded":"false","aria-controls":"collapseExample",children:"Asignadas"}),Object(s.jsx)("a",{className:"btn btn-warning","data-toggle":"collapse",href:"#".concat(e.idProgramacionDB,"a"),role:"button","aria-expanded":"false","aria-controls":"collapseExample",children:"Pendientes"})]}),Object(s.jsx)("div",{className:"collapse",id:"".concat(e.idProgramacionDB),children:Object(s.jsx)("div",{className:"card card-body",children:Object(s.jsx)("ul",{className:"list-group list-group-flush",children:e.asignacion.map((function(e){return Object(s.jsxs)(N,{className:"list-group-item",children:[Object(s.jsx)("p",{children:e.datos.nombre}),Object(s.jsx)("div",{children:Object(s.jsx)("p",{onClick:function(){return T(e.idAsignacionesDB)},children:"X"})})]},e.datos.idUsuario)}))})})}),Object(s.jsx)("div",{className:"collapse",id:"".concat(e.idProgramacionDB,"a"),children:Object(s.jsx)("div",{className:"card card-body",children:Object(s.jsx)("ul",{className:"list-group list-group-flush",children:e.pendientes.map((function(e){return Object(s.jsxs)(D,{className:"list-group-item alert",children:[Object(s.jsx)("p",{children:e.datos.nombre}),Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{onClick:function(){return X(e.idPendientesDB)},children:"asignar"}),Object(s.jsx)("p",{onClick:function(){return J(e.idPendientesDB)},children:"X"})]})]},e.datos.idUsuario)}))})})})]}):null,Object(s.jsx)(E,{onClick:function(){return F(e.idProgramacionDB)},children:"Eliminar"})]})]},e.idProgramacionDB)}))})]})]})}}},[["antB",0,2,1,3,4]]]);