_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{"+Fyi":function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/programar-colegio",function(){return t("W9+U")}])},"W9+U":function(e,n,t){"use strict";t.r(n);var r=t("rePB"),i=t("h4VS"),o=t("nKUr"),a=t("q1tI"),c=t("5Yp1"),s=t("5D9J"),u=(t("YFqc"),t("HvpM")),l=t("PSD3"),d=t.n(l),b=t("fEln");function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){Object(r.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function j(){var e=Object(i.a)(["\n    text-align: center;\n\n@media (min-width: 768px) {\n    margin-top: 5rem;\n    \n\n}\n"]);return j=function(){return e},e}function f(){var e=Object(i.a)(["\n\n    text-align: center;\n\n    @media (min-width: 768px) {\n        margin-top: 5rem;\n        margin-left: 30%;\n\n    }\n  \n"]);return f=function(){return e},e}function O(){var e=Object(i.a)(["\n    background: #e1e1e1;\n    \n    text-align: center;\n    align-items: center;\n    padding: 1rem;\n    margin: 1rem 0.5rem;\n\n    @media (min-width: 768px) {\n        width: 40rem;\n        margin: 2rem auto 2rem 40%;\n    }\n"]);return O=function(){return e},e}var h=s.a.div(O()),g=s.a.h2(f()),v=s.a.h2(j());n.default=function(){var e=Object(a.useState)([]),n=e[0],t=e[1],i=Object(a.useState)([]),s=i[0],l=i[1],m=Object(a.useState)([]),j=m[0],f=m[1],O=Object(a.useState)(""),x=O[0],N=O[1],w=Object(a.useState)({institucion:"",fecha:"",zona:"",supervisor:{},cupos:"",cantidaddistribuidoras:""}),y=w[0],C=w[1],E=Object(a.useContext)(u.a),P=E.firebase,S=(E.usuario,Object(b.a)()),D=S.admin;S.supervisor;Object(a.useEffect)((function(){!function(){var e=j.filter((function(e){return e.id===x.supervisor}));C(p(p({},y),{},{supervisor:e}))}()}),[x]),Object(a.useEffect)((function(){function e(e){var n=e.docs.map((function(e){return p({idUsuarioDB:e.id},e.data())}));l(n)}P.db.collection("usuarios").orderBy("rol").onSnapshot(e)}),[]),Object(a.useEffect)((function(){function e(e){var n=e.docs.map((function(e){return p({idColegiosDB:e.id},e.data())}));t(n)}P.db.collection("colegios").orderBy("nombre").onSnapshot(e)}),[]),Object(a.useEffect)((function(){!function(){var e=s.filter((function(e){return"supervisor"===e.rol}));f(e)}()}),[s]);return Object(o.jsx)(c.a,{children:D?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(g,{children:"Programar un Nuevo Colegio"}),Object(o.jsx)(h,{children:Object(o.jsxs)("form",{onSubmit:function(e){(e.preventDefault(),""!==y.institucion&&""!==y.fecha&&""!==y.zona&&""!==y.supervisor&&""!==y.cupos&&""!==y.cantidaddistribuidoras)?(P.db.collection("programacion").add(y),C({institucion:"",fecha:"",zona:"",supervisor:"",cupos:"",cantidaddistribuidoras:""}),d.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",d.a.stopTimer),e.addEventListener("mouseleave",d.a.resumeTimer)}}).fire({icon:"success",title:"Creado con exito"})):d.a.fire({icon:"error",title:"Oops...",text:"Todos los campos son obligatorios!"})},children:[Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"institucion",children:"Institucion"}),Object(o.jsxs)("select",{className:"form-control",id:"institucion",value:y.institucion,name:"institucion",onChange:function(e){return C(p(p({},y),{},Object(r.a)({},e.target.name,e.target.value)))},children:[Object(o.jsx)("option",{children:"--Elige una opcion--"}),n.map((function(e){return Object(o.jsx)("option",{value:e.nombre,children:e.nombre},n.idColegiosDB)}))]})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"fecha",children:"Fecha de entrega"}),Object(o.jsx)("input",{type:"date",className:"form-control",id:"fecha",value:y.fecha,placeholder:"Example input placeholder",name:"fecha",onChange:function(e){return C(p(p({},y),{},Object(r.a)({},e.target.name,e.target.value)))}})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"zona",children:"Zona"}),Object(o.jsx)("input",{type:"text",className:"form-control",value:y.zona,id:"zona",placeholder:"America, Belen, Castilla, Aranjuez, Caunces",name:"zona",onChange:function(e){return C(p(p({},y),{},Object(r.a)({},e.target.name,e.target.value)))}})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"supervisor",children:"Supervisor Responsable"}),Object(o.jsxs)("select",{className:"form-control",value:y.supervisor.nombre,id:"supervisor",name:"supervisor",onChange:function(e){return N(Object(r.a)({},e.target.name,e.target.value))},children:[Object(o.jsx)("option",{children:"--Elige una opcion--"}),j.map((function(e){var n=j.filter((function(n){return e.id===n.id}));return Object(o.jsx)("option",{value:n[0].id,children:n[0].nombre},n[0].idUsuarioDB)}))]})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"cupos",children:"Cupos"}),Object(o.jsx)("input",{type:"number",className:"form-control",value:y.cupos,id:"cupos",placeholder:"Escribe los Cupos de la Sede",name:"cupos",onChange:function(e){return C(p(p({},y),{},Object(r.a)({},e.target.name,Number(e.target.value))))}})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"distribuidoras",children:"Cantidad de Distribuidoras"}),Object(o.jsx)("input",{type:"number",className:"form-control",value:y.cantidaddistribuidoras,id:"distribuidoras",placeholder:"Escribe la Cantidad Requerida",name:"cantidaddistribuidoras",onChange:function(e){return C(p(p({},y),{},Object(r.a)({},e.target.name,Number(e.target.value))))}})]}),Object(o.jsx)("button",{type:"submit",className:"btn btn-danger form-control my-1",children:"Crear"})]})})]}):Object(o.jsx)(v,{children:"No tienes Permisos para estar aqui"})})}}},[["+Fyi",0,2,1,3,4]]]);